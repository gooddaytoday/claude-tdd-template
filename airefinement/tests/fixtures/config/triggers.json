{
  "auto_refinement_triggers": {
    "event_driven": {
      "guard_violation": {
        "threshold": 1,
        "description": "Any guard violation triggers immediate investigation"
      },
      "gate_failure_streak": {
        "threshold": 2,
        "description": "Two consecutive gate failures in the same phase"
      },
      "token_anomaly": {
        "sigma_threshold": 2,
        "description": "Token usage anomaly detected"
      },
      "manual_intervention_streak": {
        "threshold": 2,
        "description": "Two escalations in a row"
      }
    },
    "trend_based": {
      "tsr_drop": {
        "threshold_percent": 5,
        "window_runs": 20,
        "description": "TSR drop over threshold"
      },
      "token_inflation": {
        "threshold_percent": 10,
        "window_runs": 20,
        "description": "Token inflation over threshold"
      },
      "flake_rate": {
        "threshold_percent": 2,
        "window_runs": 20,
        "description": "Flake rate over threshold"
      }
    },
    "commit_based": {
      "watched_paths": [
        ".claude/agents/*",
        ".claude/skills/**",
        ".claude/hooks/*"
      ],
      "action": "subset_eval",
      "subset_size": 10,
      "block_if": "any Layer-1 metric below threshold"
    }
  }
}
